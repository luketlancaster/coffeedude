!function(){"use strict";function e(){game.physics.startSystem(Phaser.Physics.ARCADE),F=0,k=game.add.audio("explosion"),P=game.add.audio("shoot"),game.world.setBounds(0,0,800,640),game.bg=game.add.tileSprite(0,0,7040,640,"bookshelf"),y=game.add.tilemap("background"),y.addTilesetImage("steampunk"),y.addTilesetImage("blocks"),y.setCollisionByExclusion([1]),m=y.createLayer("foreground"),m.resizeWorld(),B=game.add.sprite(12,520,"head"),game.physics.enable(B,Phaser.Physics.ARCADE),B.body.collideWorldBounds=!0,B.body.setSize(25,50,19,0),B.body.gravity.y=450,B.animations.add("left",[2]),B.animations.add("right",[1]),p=game.input.keyboard.createCursorKeys(),w=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),game.camera.follow(B,Phaser.Camera.FOLLOW_TOPDOWN_TIGHT);var e=[138,419,690,1340,1472,1957,2064,2800,3065,3582,3919,4202,4538,4868,5109,6022,6479,6766],a=0;x=game.add.group(),x.enableBody=!0,x.createMultiple(18,"record"),x.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.gravity.y=750,e.body.bounce=.8}),x.forEach(function(t){t.reset(e[a],400),a++},this),C=game.add.sprite(6798,420,"hat"),game.physics.enable(C,Phaser.Physics.ARCADE),C.body.collideWorldBounds=!0,C.body.gravity.y=950;var t=[553,985,1099,1214,1879,2712,2929,3197,3767,4291,4736,4995,5244,6347,6989],i=0;g=game.add.group(),g.enableBody=!0,g.createMultiple(15,"cup"),g.setAll("body.gravity.y",950),g.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.setSize(44,63),e.body.gravity.y=950,e.animations.add("left",[0,1,2,3],10,!0),e.animations.add("right",[0,3,2,1],10,!0)}),g.forEach(function(e){e.reset(t[i],300),i++},this);var o=[327,740,1640,2190,2500,3390,4098,4410,5450,5800,6160,6566,6844],s=0;h=game.add.group(),h.enableBody=!0,h.createMultiple(13,"coffeecan"),h.setAll("collideWorldBounds",!0),h.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.body.gravity.y=950,e.anchor.set(.5,.5),e.body.setSize(41,48)}),h.forEach(function(e){e.reset(o[s],300),s++},this),u=game.add.group(),u.enableBody=!0,u.createMultiple(2,"bowtie"),u.forEach(function(e){e.body.setSize(64,30,0,13)}),f=game.add.group(),f.enableBody=!0,f.createMultiple(50,"bean"),f.forEach(function(e){e.body.setSize(15,15)}),game.cameraLastX=game.camera.x,game.cameraLastY=game.camera.y,A=game.add.text(20,20,"Local Artists' Vinyl: 0",{fontSize:"32px",fill:"#FFF",align:"center"}),A.fixedToCamera=!0,E=game.add.text(660,20,"Health: 3",{fontSize:"32px",fill:"#FFF"}),E.fixedToCamera=!0}function a(){game.physics.arcade.collide(B,m),game.physics.arcade.collide(C,m),game.physics.arcade.collide(x,m),game.physics.arcade.collide(g,m),game.physics.arcade.collide(h,m),game.physics.arcade.overlap(B,x,l,null,this),game.physics.arcade.overlap(B,C,r,null,this),game.physics.arcade.overlap(u,m,o,null,this),game.physics.arcade.overlap(u,g,d,null,this),game.physics.arcade.overlap(u,h,d,null,this),game.physics.arcade.overlap(u,f,d,null,this),game.physics.arcade.overlap(f,m,o,null,this),game.physics.arcade.overlap(f,g,s,null,this),game.physics.arcade.overlap(B,f,c,null,this),game.physics.arcade.overlap(B,h,c,null,this),game.physics.arcade.overlap(B,g,c,null,this),B.body.velocity.x=0,p.left.isDown?(B.body.velocity.x=-250,B.animations.play("left")):p.right.isDown?(B.body.velocity.x=250,B.animations.play("right")):B.frame=0,p.up.isDown&&B.body.onFloor()&&game.time.now>D&&(B.body.velocity.y=-250,D=game.time.now+750),game.camera.x!==game.cameraLastX&&(game.bg.x-=.4*(game.cameraLastX-game.camera.x),game.cameraLastX=game.camera.x),L=B.body.velocity.x>=0?"right":"left",g.forEachAlive(function(e){e.body.onFloor()&&(e.body.velocity.y=-350,e.animations.play("left")),e.body.x-B.body.x<=300&&i(e)}),h.forEachAlive(function(e){e.body.velocity.x=0,e.body.velocity.x=M[F]}),F=F+1>=M.length?0:F+1,u.forEachAlive(function(e){var a=600;Math.abs(B.x-e.x)>=a&&e.kill()},this),w.isDown&&t(),f.forEachAlive(function(e){e.body.x-game.cameraLastX<=0&&e.kill()}),R%10===1&&(z++,R++,E.text="Health: "+z),0===z&&n()}function t(){game.time.now>S&&"right"===L?(b=u.getFirstExists(!1),b&&(b.reset(B.x-30,B.y-20),b.body.velocity.x=500,S=game.time.now+750,P.play())):game.time.now>S&&"left"===L&&(b=u.getFirstExists(!1),b&&(b.reset(B.x-30,B.y-20),b.body.velocity.x=-500,S=game.time.now+750,P.play()))}function i(e){game.time.now>T&&(v=f.getFirstExists(!1),v&&(v.anchor.setTo(.5,.5),v.reset(e.body.x-30,e.body.y),T=game.time.now+2e3,game.physics.arcade.moveToObject(v,B,140)))}function o(e){e.kill()}function s(e,a){k.play(),e.kill(),a.kill()}function l(e,a){a.kill(),R+=1,A.text="Local Artists' Vinyl: "+R}function r(e){e.destroy(),game.world.setBounds(0,0,0,0),game.state.start("lvl2",R,z)}function c(e,a){a.kill(),e.animations.play("damage"),k.play(),a.body.x=-2e5,e.body.x-=75,--z,E.text="Health: "+z}function d(e,a){k.play(),e.kill(),a.kill()}function n(){game.state.start("menu"),z=2}game.state.add("lvl1",{create:e,update:a});var y,m,g,h,p,u,b,f,v,x,E,A,w,P,k,B,C,F,D=0,L="right",S=0,T=0,z=2,R=0,M=[150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150]}();