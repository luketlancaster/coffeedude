!function(){"use strict";function e(){W=W,M=M}function a(){game.physics.startSystem(Phaser.Physics.ARCADE),D=0,C=game.add.audio("explosion"),B=game.add.audio("shoot"),game.world.setBounds(0,0,800,640),game.bg=game.add.tileSprite(0,0,7040,640,"treeBG"),m=game.add.tilemap("background2"),m.addTilesetImage("steampunk"),m.addTilesetImage("blocks"),m.addTilesetImage("trees2"),g=m.createLayer("background"),h=m.createLayer("platforms"),g.resizeWorld(),h.resizeWorld(),m.setCollisionByExclusion([1]),F=game.add.sprite(40,0,"head"),game.physics.enable(F,Phaser.Physics.ARCADE),F.body.collideWorldBounds=!1,F.body.setSize(36,56,14,-8),F.body.gravity.y=400,F.animations.add("left",[2]),F.animations.add("right",[1]),b=game.input.keyboard.createCursorKeys(),k=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),game.camera.follow(F,Phaser.Camera.FOLLOW_TOPDOWN_TIGHT);var e=[173,674,815,1300,1521,1907,2294,2398,2499,2682,2846,2992,3148,3279,3404,3495,3724,4160,4574,4841,5103,5230,5650,5935,6144,6419,6705],a=0;E=game.add.group(),E.enableBody=!0,E.createMultiple(27,"record"),E.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.gravity.y=750,e.body.bounce=.8}),E.forEach(function(t){t.reset(e[a],200),a++},this),L=game.add.sprite(6982,70,"banner"),game.physics.enable(L,Phaser.Physics.ARCADE),L.body.collideWorldBounds=!0,L.animations.add("marquee",[0,1,2],10,!0),L.scale.set(2,2);var t=[475,1079,1733,2113,3015,3711,4129,4839,5252,5678,6688],i=0;p=game.add.group(),p.enableBody=!0,p.createMultiple(10,"cup"),p.setAll("collideWorldBounds",!0),p.setAll("body.gravity.y",950),p.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.anchor.set(.5,.5),e.body.setSize(52,63),e.body.gravity.y=950,e.animations.add("left",[0,1,2,3],10,!0),e.animations.add("right",[0,3,2,1],10,!0)}),p.forEach(function(e){e.reset(t[i],90),i++},this);var o=[597,3437,4e3,4531,6287,6743],i=0;u=game.add.group(),u.enableBody=!0,u.createMultiple(7,"coffeecan"),u.forEach(function(e){game.physics.enable(e,Phaser.Physics.ARCADE),e.body.gravity.y=950,e.anchor.set(.5,.5),e.body.setSize(41,48)}),u.forEach(function(e){e.reset(o[i],300),i++},this),f=game.add.group(),f.enableBody=!0,f.createMultiple(2,"bowtie"),f.forEach(function(e){e.body.setSize(64,30,0,13)}),x=game.add.group(),x.enableBody=!0,x.createMultiple(2,"bean"),x.setAll("body.setSize",32,32),game.cameraLastX=game.camera.x,game.cameraLastY=game.camera.y,P=game.add.text(20,20,"Local Artists' Vinyl: 0",{fontSize:"32px",fill:"#FFF",align:"center"}),P.fixedToCamera=!0,w=game.add.text(660,20,"Health: 3",{fontSize:"32px",fill:"#FFF"}),w.fixedToCamera=!0}function t(){game.physics.arcade.collide(F,h),game.physics.arcade.collide(L,h),game.physics.arcade.collide(E,h),game.physics.arcade.collide(p,h),game.physics.arcade.collide(u,h),game.physics.arcade.overlap(F,E,r,null,this),game.physics.arcade.overlap(F,L,c,null,this),game.physics.arcade.overlap(f,h,s,null,this),game.physics.arcade.overlap(f,p,n,null,this),game.physics.arcade.overlap(f,u,n,null,this),game.physics.arcade.overlap(f,x,n,null,this),game.physics.arcade.overlap(x,h,s,null,this),game.physics.arcade.overlap(x,p,l,null,this),game.physics.arcade.overlap(F,x,d,null,this),game.physics.arcade.overlap(F,u,d,null,this),game.physics.arcade.overlap(F,p,d,null,this),F.body.velocity.x=0,L.animations.play("marquee"),b.left.isDown?(F.body.velocity.x=-250,F.animations.play("left")):b.right.isDown?(F.body.velocity.x=250,F.animations.play("right")):F.frame=0,b.up.isDown&&F.body.onFloor()&&game.time.now>S&&(F.body.velocity.y=-275,S=game.time.now+750),game.camera.x!==game.cameraLastX&&(game.bg.x-=.2*(game.cameraLastX-game.camera.x),game.cameraLastX=game.camera.x),F.body.y>=700&&(F.body.y=0),T=F.body.velocity.x>=0?"right":"left",p.forEachAlive(function(e){e.body.onFloor()&&(e.body.velocity.y=-350,e.animations.play("left")),e.body.y>=655&&e.kill(),e.body.x-F.body.x<=200&&o(e)}),u.forEachAlive(function(e){e.body.velocity.x=0,e.body.velocity.x=O[D]}),D=D+1>=O.length?0:D+1,f.forEachAlive(function(e){var a=600;Math.abs(F.x-e.x)>=a&&e.kill()},this),k.isDown&&i(),x.forEachAlive(function(e){e.body.x-game.cameraLastX<=0&&e.kill()}),M%10===1&&(W++,M++,w.text="Health: "+W),0===W&&y()}function i(){game.time.now>z&&"right"===T?(v=f.getFirstExists(!1),v&&(v.reset(F.x-30,F.y-20),v.body.velocity.x=500,z=game.time.now+750,B.play())):game.time.now>z&&"left"===T&&(v=f.getFirstExists(!1),v&&(v.reset(F.x-30,F.y-20),v.body.velocity.x=-500,z=game.time.now+750,B.play()))}function o(e){game.time.now>R&&(A=x.getFirstExists(!1),A&&(A.anchor.setTo(.5,.5),A.reset(e.body.x-30,e.body.y),R=game.time.now+2e3,game.physics.arcade.moveToObject(A,F,140)))}function s(e){e.kill()}function l(e,a){C.play(),e.kill(),a.kill()}function r(e,a){a.kill(),M+=1,P.text="Local Artists' Vinyl: "+M}function c(e){e.destroy(),game.world.setBounds(0,0,0,0),game.state.start("boss")}function d(e,a){e.animations.play("damage"),C.play(),a.body.x=-2e5,e.body.x-=75,--W,w.text="Health: "+W}function n(e,a){C.play(),e.kill(),a.kill()}function y(){game.state.start("menu"),W=2}game.state.add("lvl2",{init:e,create:a,update:t});var m,g,h,p,u,b,f,v,x,A,E,w,P,k,B,C,F,L,D,S=0,T="right",z=0,R=0,W=0,M=0,O=[150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150,-150]}();